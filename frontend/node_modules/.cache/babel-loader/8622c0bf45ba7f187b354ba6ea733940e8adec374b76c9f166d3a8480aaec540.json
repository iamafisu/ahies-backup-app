{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import{format}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ReportPage(){const[reportData,setReportData]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);// Fetch the report data when the page loads\nuseEffect(()=>{axios.get('https://iamafisu.pythonanywhere.com/report').then(response=>{setReportData(response.data);setIsLoading(false);}).catch(error=>{console.error('Error fetching report data:',error);setError('Failed to load report data');setIsLoading(false);});},[]);// Function to download the report as Excel\nconst downloadReport=()=>{axios({url:'https://iamafisu.pythonanywhere.com/download_report',method:'GET',responseType:'blob'// Important to handle binary data\n}).then(response=>{const url=window.URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download','upload_report.xlsx');// Specify the file name\ndocument.body.appendChild(link);link.click();}).catch(error=>{console.error('Error downloading the report:',error);setError('Failed to download the report');});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white-500 text-black p-4 shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/newlogo.png\",alt:\"gss-logo\",className:\"w-10 h-10 mr-2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold\",children:\"AHIES Backup System\"})]}),/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"hover:text-gray-300\",children:\"Upload\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/report\",className:\"hover:text-gray-300\",children:\"Report\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/help\",className:\"hover:text-gray-300\",children:\"Help?\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto my-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"AHIES Backup Upload Report\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500\",children:error}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Please wait...\"}):reportData.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto w-full bg-white rounded shadow\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Team\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"File Count\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Login IDs\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2\",children:\"Last Modified\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reportData.map((team,index)=>{var _team$login_ids;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:team.team}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:team.file_count}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:((_team$login_ids=team.login_ids)===null||_team$login_ids===void 0?void 0:_team$login_ids.map(id=>id.replace('.zip','')).join(', '))||'No IDs'}),/*#__PURE__*/_jsx(\"td\",{className:\"border px-4 py-2\",children:format(new Date(team.last_modified),'PPpp')})]},index);})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No uploads found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:downloadReport,className:\"bg-blue-500 text-white mt-4 px-4 py-2\",\"aria-label\":\"Download the report as Excel\",children:\"Download Report as Excel\"})]})]});}export default ReportPage;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","format","jsx","_jsx","jsxs","_jsxs","ReportPage","reportData","setReportData","isLoading","setIsLoading","error","setError","get","then","response","data","catch","console","downloadReport","url","method","responseType","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","children","className","src","alt","to","length","map","team","index","_team$login_ids","file_count","login_ids","id","replace","join","Date","last_modified","onClick"],"sources":["/Users/user/Documents/ahies-backup-system/frontend/src/report.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { format } from 'date-fns';\n\nfunction ReportPage() {\n  const [reportData, setReportData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Fetch the report data when the page loads\n  useEffect(() => {\n    axios.get('https://iamafisu.pythonanywhere.com/report')\n      .then(response => {\n        setReportData(response.data);\n        setIsLoading(false);\n      })\n      .catch(error => {\n        console.error('Error fetching report data:', error);\n        setError('Failed to load report data');\n        setIsLoading(false);\n      });\n  }, []);\n\n  // Function to download the report as Excel\n  const downloadReport = () => {\n    axios({\n      url: 'https://iamafisu.pythonanywhere.com/download_report',\n      method: 'GET',\n      responseType: 'blob', // Important to handle binary data\n    })\n      .then((response) => {\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', 'upload_report.xlsx'); // Specify the file name\n        document.body.appendChild(link);\n        link.click();\n      })\n      .catch((error) => {\n        console.error('Error downloading the report:', error);\n        setError('Failed to download the report');\n      });\n  };\n\n  return (\n    <div>\n      <header className=\"bg-white-500 text-black p-4 shadow-md\">\n        <div className=\"container mx-auto flex justify-between items-center\">\n          <div className=\"flex items-center\">\n            <img src=\"/newlogo.png\" alt=\"gss-logo\" className=\"w-10 h-10 mr-2\" />\n            <h1 className=\"text-xl font-bold\">AHIES Backup System</h1>\n          </div>\n          <nav>\n            <ul className=\"flex space-x-4\">\n              <li><Link to=\"/\" className=\"hover:text-gray-300\">Upload</Link></li>\n              <li><Link to=\"/report\" className=\"hover:text-gray-300\">Report</Link></li>\n              <li><Link to=\"/help\" className=\"hover:text-gray-300\">Help?</Link></li>\n            </ul>\n          </nav>\n        </div>\n      </header>\n\n      <div className=\"container mx-auto my-8\">\n        <h2 className=\"text-2xl font-bold mb-4\">AHIES Backup Upload Report</h2>\n        {error && <p className=\"text-red-500\">{error}</p>}\n        {isLoading ? (\n          <p>Please wait...</p>\n        ) : (\n          reportData.length > 0 ? (\n            <table className=\"table-auto w-full bg-white rounded shadow\">\n              <thead>\n                <tr>\n                  <th className=\"px-4 py-2\">Team</th>\n                  <th className=\"px-4 py-2\">File Count</th>\n                  <th className=\"px-4 py-2\">Login IDs</th>\n                  <th className=\"px-4 py-2\">Last Modified</th>\n                </tr>\n              </thead>\n              <tbody>\n                {reportData.map((team, index) => (\n                  <tr key={index}>\n                    <td className=\"border px-4 py-2\">{team.team}</td>\n                    <td className=\"border px-4 py-2\">{team.file_count}</td>\n                    <td className=\"border px-4 py-2\">{team.login_ids?.map(id => id.replace('.zip', '')).join(', ') || 'No IDs'}</td>\n                    <td className=\"border px-4 py-2\">{format(new Date(team.last_modified), 'PPpp')}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          ) : (\n            <p>No uploads found</p>\n          )\n        )}\n\n        <button \n          onClick={downloadReport} \n          className=\"bg-blue-500 text-white mt-4 px-4 py-2\"\n          aria-label=\"Download the report as Excel\"\n        >\n          Download Report as Excel\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ReportPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}